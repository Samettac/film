{% extends 'base.html' %}

{% block content %}
<div class="px-4 sm:px-6 md:px-10 py-5">

    {% if search_query %}
    <h1 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] mb-6">Arama Sonuçları</h1>
    <p class="text-white/60 mb-8">"<span class="text-white font-medium">{{ search_query }}</span>" için sonuçlar:</p>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
        {% for movie in results %}
        <div class="flex flex-col gap-3 group">
            <div class="w-full bg-center bg-no-repeat aspect-[2/3] bg-cover rounded-lg flex flex-col relative overflow-hidden group-hover:ring-2 ring-primary transition-all duration-300"
                style="background-image: url('{% if movie.poster_path %}https://image.tmdb.org/t/p/w400{{ movie.poster_path }}{% else %}https://via.placeholder.com/400x600?text=No+Image{% endif %}');">
                <div
                    class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                    <a href="{{ url_for('add_movie_entry', tmdb_id=movie.id) }}"
                        class="bg-primary hover:bg-primary/90 text-white font-bold py-2 px-6 rounded-full transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
                        Filmi Ekle
                    </a>
                </div>
            </div>
            <div>
                <p class="text-white text-base font-medium leading-normal truncate" title="{{ movie.title }}">{{
                    movie.title }}</p>
                <p class="text-white/60 text-sm font-normal leading-normal">{{ movie.release_date[:4] if
                    movie.release_date else 'N/A' }}</p>
            </div>
        </div>
        {% else %}
        <div class="col-span-full text-center py-20 bg-white/5 rounded-2xl border border-white/10">
            <p class="text-white/60 text-lg">Aradığınız kriterlere uygun film bulunamadı.</p>
            <a href="{{ url_for('search') }}" class="inline-block mt-4 text-primary hover:underline">Başka bir arama
                yap</a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <!-- Empty State / Landing for Add Page -->
    <div class="flex flex-col items-center justify-center py-20 text-center min-h-[60vh]">
        <div class="bg-white/5 p-8 rounded-full mb-8 border border-white/10">
            <span class="material-symbols-outlined !text-6xl text-white/20">movie</span>
        </div>
        <h2 class="text-white text-4xl font-bold mb-4 tracking-tight">Ajandana Film Ekle</h2>
        <p class="text-white/60 max-w-md mb-10 text-lg">İzlediğin filmleri bulmak, puanlamak ve listene eklemek için
            aşağıdan arama yapabilirsin.</p>

        <form action="{{ url_for('search') }}" method="get" class="w-full max-w-lg relative z-10">
            <div
                class="flex w-full items-stretch rounded-full h-14 bg-white/10 ring-1 ring-white/10 focus-within:ring-2 focus-within:ring-primary focus-within:bg-white/15 transition-all shadow-xl">
                <div class="text-white/60 flex items-center justify-center pl-6">
                    <span class="material-symbols-outlined">search</span>
                </div>
                <input name="q"
                    class="flex-1 bg-transparent border-none text-white text-lg focus:ring-0 px-4 placeholder:text-white/40"
                    placeholder="Film adı yaz (örn. Inception)..." required autofocus>
                <button type="submit"
                    class="px-8 text-white font-bold text-base bg-primary rounded-r-full hover:bg-primary/90 transition-colors">
                    Ara
                </button>
            </div>
        </form>
    </div>
    {% endif %}
</div>
{% endblock %}